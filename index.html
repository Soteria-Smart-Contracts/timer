<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>Minimal Time Tracker</title>
  <style>
    body{font-family:sans-serif;display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:100vh;margin:0;background:#f0f0f0;transition:.5s}.timer-active{background:#f0f8f0}#sessionTimeDisplay{font-size:1.8rem;color:#555;margin-bottom:10px;margin-top:20px}#totalTimeDisplay{font-size:3rem;margin-top:20px;color:#333}#startStopButton{width:200px;height:200px;cursor:pointer;border:none;border-radius:50%;background:#e0e0e0;background-image:linear-gradient(to bottom,#f5f5f5,#e0e0e0);box-shadow:0 5px 15px rgba(0,0,0,.2);transition:.3s;display:flex;align-items:center;justify-content:center;font-size:2.5rem;color:#555;text-shadow:1px 1px 1px #fff}#startStopButton.active-state{background:#4CAF50;background-image:linear-gradient(to bottom,#66bb6a,#4caf50);color:#fff;text-shadow:1px 1px 2px #000}
  </style>
</head>
<body onbeforeunload="handlePageClose()">
  <div id="sessionTimeDisplay">00:00:00</div>
  <button id="startStopButton">OFF</button>
  <div id="totalTimeDisplay">00:00:00</div>
  <script>
const[sD,tD,b]=[...['sessionTimeDisplay','totalTimeDisplay','startStopButton'].map(id=>document.getElementById(id))];let total=+localStorage.getItem('total')||0,running=localStorage.getItem('running')==='true',startT=+localStorage.getItem('startT')||null,i;const fmt=s=>{let h=Math.floor(s/3600),m=Math.floor((s%3600)/60),ss=s%60;return`${h.toString().padStart(2,'0')}:${m.toString().padStart(2,'0')}:${ss.toString().padStart(2,'0')}`};const update=()=>{let now=Date.now(),curr=running&&startT?Math.floor((now-startT)/1000):0;sD.textContent=fmt(curr);tD.textContent=fmt(total+curr);b.textContent=running?'ON':'OFF';b.classList.toggle('active-state',running);document.body.classList.toggle('timer-active',running)};const save=()=>{localStorage.setItem('total',total);localStorage.setItem('running',running);localStorage.setItem('startT',startT)};const start=()=>{if(!startT)startT=Date.now();running=true;i=setInterval(update,1e3);update();save()};const stop=()=>{if(!running)return;let d=startT?Math.floor((Date.now()-startT)/1e3):0;total+=d;running=false;startT=null;clearInterval(i);update();save()};b.onclick=()=>running?stop():start();window.onbeforeunload=()=>running&&stop();if(running)start();else update()
  </script>
</body>
</html>